<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Comercial Innova Ocular 2026</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React y ReactDOM -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- Babel para JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Recharts -->
    <script src="https://unpkg.com/recharts/umd/Recharts.js"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap');
        body { font-family: 'Inter', sans-serif; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            height: 20px;
            width: 20px;
            border-radius: 50%;
            background: #2563eb;
            cursor: pointer;
            box-shadow: 0 0 15px rgba(37, 99, 235, 0.4);
            border: 2px solid white;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-900">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useMemo, useEffect } = React;
        const { 
            BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer, Cell
        } = Recharts;

        // Componente de Icono robusto para entorno web
        const Icon = ({ name, size = 20, className = "" }) => {
            useEffect(() => {
                if (window.lucide) {
                    window.lucide.createIcons();
                }
            }, [name]);
            return <i data-lucide={name} style={{ width: size, height: size }} className={`inline-block ${className}`}></i>;
        };

        const App = () => {
            const [activeTab, setActiveTab] = useState('overview');
            const [simulatedSales, setSimulatedSales] = useState(750000);

            // DATOS: OBJETIVOS 2026
            const objectives = [
                { label: 'Lentes Pseudofáquicas', total: 26500, goal: 2500, icon: 'target' },
                { label: 'Lentes Fáquicas', total: 2200, goal: 150, icon: 'award' },
                { label: 'Viscoelásticos', total: 38000, goal: 3500, icon: 'package' }
            ];

            // DATOS: ESCALA RAPPEL ACORDADA
            const rappelScale = [
                { limit: 250000, rate: 0.015 }, { limit: 500000, rate: 0.02 },
                { limit: 750000, rate: 0.025 }, { limit: 1000000, rate: 0.03 },
                { limit: 1250000, rate: 0.035 }, { limit: 1500000, rate: 0.04 },
                { limit: 1750000, rate: 0.045 }, { limit: 2000000, rate: 0.05 }
            ];

            // TARIFARIO CONSOLIDADO
            const products = [
                { cat: 'Fáquicas', name: 'EYECRYL PHAKIC BAJA POTENCIA', price: 500, desc: 'SPH +0.50 a +2.75 / -0.50 a -6.00' },
                { cat: 'Fáquicas', name: 'EYECRYL PHAKIC ALTA POTENCIA (SPH)', price: 770, desc: 'SPH +3.00 a +10.00 / -6.50 a -25.00' },
                { cat: 'Fáquicas', name: 'EYECRYL PHAKIC ALTA POTENCIA (TOR)', price: 990, desc: 'Cilindros hasta +5D' },
                { cat: 'Fáquicas', name: 'EYECRYL PHAKIC CUSTOM', price: 1450, desc: 'SPH > -25D / +10D o CIL > +5D' },
                { cat: 'Premium', name: 'OPTIFLEX TRIO 3FLA6', price: 395, desc: 'Lente Trifocal' },
                { cat: 'Premium', name: 'OPTIFLEX TRIO TORICA', price: 570, desc: 'Lente Trifocal Tórica' },
                { cat: 'Premium', name: 'OPTIFLEX TRIO PLUS', price: 420, desc: 'Trifocal Nueva Generación' },
                { cat: 'EDOF', name: 'EYECRYL SERT', price: 125, desc: 'EDOF Precargada' },
                { cat: 'EDOF', name: 'EYECRYL SERT TORIC', price: 220, desc: 'EDOF Tórica' },
                { cat: 'Mono', name: 'OPTIFLEX GENESIS COMFORT NY', price: 95, desc: 'Monofocal Precargada' },
                { cat: 'Visco', name: 'BIO HYALUR 1ML PFS', price: 13.73, desc: 'Hialuronato 1%' },
                { cat: 'Visco', name: 'BIO HYALUR PLUS 1ML PFS', price: 15.45, desc: 'Hialuronato 1.4%' },
                { cat: 'Visco', name: 'BIO HYALUR DUO', price: 26.68, desc: 'Cohesivo + Dispersivo' },
                { cat: 'Visco', name: 'BIO HYALUR HV 1ML PFS', price: 17.25, desc: 'Hialuronato 2.4%' },
                { cat: 'Visco', name: 'BIO HYALUR SV 1ML PFS', price: 18.13, desc: 'Hialuronato 3.0%' },
                { cat: 'Otros', name: 'BIO BLUE 1ML PFS', price: 9.25, desc: 'Colorante' },
                { cat: 'Otros', name: 'BIOBLUE 90 PLUS', price: 39.00, desc: 'ERM/ILM' },
                { cat: 'Otros', name: 'BIOSIL 10ML', price: 65.00, desc: 'VR Silicona' },
                { cat: 'Otros', name: 'BIO OCTANE', price: 50.00, desc: 'Perfluorocarbono' }
            ];

            const currentRappel = useMemo(() => {
                const level = [...rappelScale].reverse().find(r => simulatedSales >= r.limit);
                return level ? level : { limit: 0, rate: 0 };
            }, [simulatedSales]);

            const rappelAmount = simulatedSales * currentRappel.rate;

            return (
                <div className="max-w-7xl mx-auto p-4 md:p-10">
                    {/* Encabezado */}
                    <div className="flex flex-col lg:flex-row lg:items-end justify-between gap-8 mb-12">
                        <div>
                            <div className="inline-block px-4 py-1.5 bg-blue-600 text-white text-[10px] font-black uppercase tracking-[0.2em] rounded-lg mb-4 shadow-lg shadow-blue-200">
                                Biotech Suministros
                            </div>
                            <h1 className="text-4xl lg:text-6xl font-black text-slate-900 tracking-tighter">Innova Ocular</h1>
                            <p className="text-slate-400 font-bold text-lg mt-2 uppercase tracking-tight">Acuerdo Estratégico 2026</p>
                        </div>
                        <div className="flex bg-white p-2 rounded-2xl shadow-xl border border-slate-100 overflow-x-auto no-scrollbar">
                            {['overview', 'catalog', 'rappel'].map(tab => (
                                <button key={tab} onClick={() => setActiveTab(tab)}
                                    className={`px-8 py-3.5 rounded-xl text-sm font-black transition-all duration-300 whitespace-nowrap ${activeTab === tab ? 'bg-blue-600 text-white shadow-xl shadow-blue-200' : 'text-slate-400 hover:bg-slate-50'}`}>
                                    {tab === 'overview' ? 'ESTRATEGIA' : tab === 'catalog' ? 'TARIFARIO' : 'SIMULADOR'}
                                </button>
                            ))}
                        </div>
                    </div>

                    {activeTab === 'overview' && (
                        <div className="grid grid-cols-1 gap-8 animate-in fade-in duration-700">
                            {/* Tarjetas de objetivos */}
                            <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
                                {objectives.map((obj, i) => (
                                    <div key={i} className="bg-white p-10 rounded-[40px] shadow-sm border border-slate-100 flex flex-col justify-between">
                                        <div className="flex justify-between items-start mb-10">
                                            <div className="p-4 rounded-2xl bg-blue-50 text-blue-600">
                                                <Icon name={obj.icon} size={28} />
                                            </div>
                                            <span className="text-[10px] font-black text-slate-300 uppercase tracking-widest">OBJ 2026</span>
                                        </div>
                                        <div>
                                            <p className="text-xs font-black text-slate-400 uppercase tracking-widest mb-2">{obj.label}</p>
                                            <h3 className="text-4xl font-black text-slate-900 tracking-tighter">
                                                {obj.goal.toLocaleString()} <span className="text-sm font-bold text-slate-300">UDS</span>
                                            </h3>
                                        </div>
                                    </div>
                                ))}
                            </div>

                            {/* Gráfico comparativo */}
                            <div className="bg-white p-10 rounded-[48px] shadow-sm border border-slate-100">
                                <div className="flex flex-col md:flex-row md:items-center justify-between mb-12 gap-6">
                                    <h3 className="font-black text-2xl text-slate-900 tracking-tight">Capacidad de Suministro</h3>
                                    <div className="flex items-center gap-8">
                                        <div className="flex items-center gap-2">
                                            <div className="w-3 h-3 bg-slate-100 rounded-full"></div>
                                            <span className="text-[10px] font-black text-slate-400 uppercase">Grupo Total</span>
                                        </div>
                                        <div className="flex items-center gap-2">
                                            <div className="w-3 h-3 bg-blue-600 rounded-full"></div>
                                            <span className="text-[10px] font-black text-slate-400 uppercase">Objetivo Biotech</span>
                                        </div>
                                    </div>
                                </div>
                                <div className="h-80 w-full">
                                    <ResponsiveContainer>
                                        <BarChart data={objectives} layout="vertical" margin={{ left: 20, right: 40 }}>
                                            <CartesianGrid strokeDasharray="3 3" horizontal={true} vertical={false} stroke="#f1f5f9" />
                                            <XAxis type="number" hide />
                                            <YAxis dataKey="label" type="category" width={160} tick={{fontSize: 12, fontWeight: 800, fill: '#64748b'}} />
                                            <Tooltip cursor={{fill: '#f8fafc'}} contentStyle={{borderRadius: '24px', border: 'none', boxShadow: '0 25px 50px -12px rgb(0 0 0 / 0.1)'}} />
                                            <Bar dataKey="total" fill="#f1f5f9" radius={[0, 10, 10, 0]} barSize={35} />
                                            <Bar dataKey="goal" fill="#2563eb" radius={[0, 10, 10, 0]} barSize={35} />
                                        </BarChart>
                                    </ResponsiveContainer>
                                </div>
                            </div>
                        </div>
                    )}

                    {activeTab === 'catalog' && (
                        <div className="bg-white rounded-[40px] shadow-sm border border-slate-100 overflow-hidden animate-in fade-in duration-500">
                            <div className="overflow-x-auto">
                                <table className="w-full text-left">
                                    <thead className="bg-slate-50 border-b border-slate-100 text-slate-400">
                                        <tr>
                                            <th className="p-8 text-[11px] font-black uppercase tracking-[0.2em]">Producto</th>
                                            <th className="p-8 text-[11px] font-black uppercase tracking-[0.2em]">Categoría</th>
                                            <th className="p-8 text-[11px] font-black uppercase tracking-[0.2em] text-right">Precio Neto (€)</th>
                                        </tr>
                                    </thead>
                                    <tbody className="divide-y divide-slate-50">
                                        {products.map((p, i) => (
                                            <tr key={i} className="hover:bg-blue-50/20 transition-colors">
                                                <td className="p-8">
                                                    <div className="font-black text-slate-900 text-sm tracking-tight uppercase">{p.name}</div>
                                                    <div className="text-[10px] text-slate-400 font-bold mt-1 tracking-tight uppercase">{p.desc}</div>
                                                </td>
                                                <td className="p-8">
                                                    <span className={`px-3 py-1.5 rounded-lg text-[9px] font-black uppercase tracking-tighter ${
                                                        p.cat === 'Fáquicas' ? 'bg-indigo-100 text-indigo-700' :
                                                        p.cat === 'Premium' ? 'bg-amber-100 text-amber-700' :
                                                        p.cat === 'Visco' ? 'bg-emerald-100 text-emerald-700' :
                                                        'bg-slate-100 text-slate-600'
                                                    }`}>
                                                        {p.cat}
                                                    </span>
                                                </td>
                                                <td className="p-8 text-right font-black text-blue-700 text-2xl tracking-tighter">{p.price.toFixed(2)} €</td>
                                            </tr>
                                        ))}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    )}

                    {activeTab === 'rappel' && (
                        <div className="grid grid-cols-1 lg:grid-cols-2 gap-10 animate-in zoom-in-95 duration-500">
                            <div className="bg-white p-10 rounded-[48px] border border-slate-100">
                                <h3 className="font-black text-2xl text-slate-900 mb-10 tracking-tight flex items-center gap-3 uppercase">
                                    <Icon name="award" className="text-blue-600" /> RAPPEL GRUPO 2026
                                </h3>
                                <div className="space-y-3">
                                    {rappelScale.map((r, i) => (
                                        <div key={i} className={`p-6 rounded-3xl flex justify-between items-center border-2 transition-all duration-500 ${simulatedSales >= r.limit ? 'bg-emerald-50 border-emerald-200 text-emerald-900' : 'bg-white border-slate-50 text-slate-200'}`}>
                                            <span className="text-xs font-black uppercase tracking-widest">≥ {r.limit.toLocaleString()} €</span>
                                            <span className={`font-black text-2xl ${simulatedSales >= r.limit ? 'text-emerald-500' : 'text-slate-100'}`}>{(r.rate * 100).toFixed(1)}%</span>
                                        </div>
                                    ))}
                                </div>
                            </div>
                            <div className="space-y-8">
                                <div className="bg-slate-900 p-12 rounded-[56px] text-white shadow-2xl relative overflow-hidden">
                                    <div className="absolute top-0 right-0 w-64 h-64 bg-blue-600/10 rounded-full blur-[100px] -mr-20 -mt-20"></div>
                                    <p className="text-slate-500 text-[10px] font-black uppercase tracking-[0.3em] mb-6 text-center">Simulador Anual</p>
                                    <div className="text-center mb-12">
                                        <h2 className="text-7xl font-black tracking-tighter tabular-nums">{simulatedSales.toLocaleString()} <span className="text-xl font-normal text-slate-600">€</span></h2>
                                    </div>
                                    <input type="range" min="100000" max="2500000" step="50000" value={simulatedSales} onChange={(e) => setSimulatedSales(Number(e.target.value))}
                                        className="w-full h-1.5 bg-slate-800 rounded-full appearance-none cursor-pointer mb-16" />
                                    <div className="grid grid-cols-2 gap-10 pt-12 border-t border-slate-800">
                                        <div>
                                            <p className="text-slate-500 text-[10px] font-black uppercase tracking-widest mb-3">Devolución</p>
                                            <p className="text-4xl font-black text-emerald-400 tabular-nums">{(simulatedSales * currentRappel.rate).toLocaleString()} €</p>
                                        </div>
                                        <div className="text-right">
                                            <p className="text-slate-500 text-[10px] font-black uppercase tracking-widest mb-3">Porcentaje</p>
                                            <p className="text-4xl font-black text-blue-500">{(currentRappel.rate * 100).toFixed(1)}%</p>
                                        </div>
                                    </div>
                                </div>
                                <div className="bg-blue-600 p-8 rounded-[40px] text-white">
                                    <div className="flex gap-6 items-start">
                                        <div className="p-3 bg-white/10 rounded-2xl">
                                            <Icon name="info" />
                                        </div>
                                        <div>
                                            <h4 className="font-black text-sm uppercase tracking-widest mb-2">Bonus por Clínica</h4>
                                            <p className="text-xs text-blue-100 leading-relaxed font-bold">
                                                Se aplicará un rappel extra acumulativo de hasta el 5,50% si el centro individual supera los 150.000 € anuales.
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
