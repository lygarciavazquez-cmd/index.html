<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Comercial Innova Ocular 2026</title>
    <!-- Tailwind CSS para el diseño -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React y ReactDOM -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- Babel para procesar JSX en el navegador -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Recharts para los gráficos -->
    <script src="https://unpkg.com/recharts/umd/Recharts.js"></script>
    <!-- Lucide para los iconos -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap');
        body { font-family: 'Inter', sans-serif; }
        .recharts-responsive-container { min-height: 250px; }
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            height: 18px;
            width: 18px;
            border-radius: 50%;
            background: #2563eb;
            cursor: pointer;
            box-shadow: 0 0 10px rgba(37, 99, 235, 0.3);
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-900">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useMemo, useEffect } = React;
        const { 
            BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer, Cell
        } = Recharts;

        const Icon = ({ name, size = 20, className = "" }) => {
            useEffect(() => {
                if (window.lucide) { window.lucide.createIcons(); }
            }, [name]);
            return <i data-lucide={name} style={{ width: size, height: size }} className={className}></i>;
        };

        const App = () => {
            const [activeTab, setActiveTab] = useState('overview');
            const [simulatedSales, setSimulatedSales] = useState(750000);

            // Objetivos 2026 (Imagen b59a3b)
            const objectives = [
                { label: 'Lentes Pseudofáquicas', total: 26500, goal: 2500, color: '#3b82f6', icon: 'target' },
                { label: 'Lentes Fáquicas', total: 2200, goal: 150, color: '#6366f1', icon: 'award' },
                { label: 'Viscoelásticos', total: 38000, goal: 3500, color: '#10b981', icon: 'package' }
            ];

            // Escala de Rappel (Imagen b5a19c)
            const rappelScale = [
                { limit: 250000, rate: 0.015 }, { limit: 500000, rate: 0.02 },
                { limit: 750000, rate: 0.025 }, { limit: 1000000, rate: 0.03 },
                { limit: 1250000, rate: 0.035 }, { limit: 1500000, rate: 0.04 },
                { limit: 1750000, rate: 0.045 }, { limit: 2000000, rate: 0.05 },
            ];

            // Listado consolidado (Imágenes b59ddd, b59e94, b59eb3, b5a179, b5a181)
            const products = [
                // FÁQUICAS
                { cat: 'Fáquicas', name: 'EYECRYL PHAKIC BAJA POTENCIA', price: 500, desc: 'SPH +0.50 a +2.75 / -0.50 a -6.00' },
                { cat: 'Fáquicas', name: 'EYECRYL PHAKIC ALTA POTENCIA (SPH)', price: 770, desc: 'SPH +3.00 a +10.00 / -6.50 a -25.00' },
                { cat: 'Fáquicas', name: 'EYECRYL PHAKIC ALTA POTENCIA (TOR)', price: 990, desc: 'Cilindros hasta +5D' },
                { cat: 'Fáquicas', name: 'EYECRYL PHAKIC CUSTOM', price: 1450, desc: 'SPH > -25D / +10D' },
                
                // PREMIUM
                { cat: 'Premium', name: 'OPTIFLEX TRIO 3FLA6', price: 395, desc: 'Trifocal' },
                { cat: 'Premium', name: 'OPTIFLEX TRIO TORICA', price: 570, desc: 'Trifocal Tórica' },
                { cat: 'Premium', name: 'OPTIFLEX TRIO PLUS (NEW)', price: 420, desc: 'Trifocal Nueva Generación' },
                { cat: 'Premium', name: 'OPTIFLEX XTENSE COMFORT PLUS', price: 420, desc: 'Continuous Vision' },
                { cat: 'EDOF', name: 'EYECRYL SERT', price: 125, desc: 'EDOF Entry Level' },
                { cat: 'EDOF', name: 'EYECRYL SERT TORIC (CIL 1.0D)', price: 220, desc: 'EDOF Tórica' },
                { cat: 'Bifocal', name: 'EYECRYL ACTV', price: 265, desc: 'Bifocal' },

                // MONOFOCALES
                { cat: 'Mono', name: 'OPTIFLEX GENESIS COMFORT NY', price: 95, desc: 'Precargada' },
                { cat: 'Mono', name: 'EYECRYL PLUS NATURAL HD', price: 75, desc: 'No precargada' },

                // VISCOELÁSTICOS
                { cat: 'Visco', name: 'BIO HYALUR 1ML PFS', price: 13.73, desc: 'Hialuronato Sódico 1%' },
                { cat: 'Visco', name: 'BIO HYALUR PLUS 1ML PFS', price: 15.45, desc: 'Hialuronato Sódico 1.4%' },
                { cat: 'Visco', name: 'BIO HYALUR DUO', price: 26.68, desc: '1.0% + 2.4%' },
                { cat: 'Visco', name: 'BIO HYALUR HV 1ML PFS', price: 17.25, desc: 'Hialuronato Sódico 2.4%' },
                { cat: 'Visco', name: 'BIO HYALUR SV 1ML PFS', price: 18.13, desc: 'Hialuronato Sódico 3.0%' },
                { cat: 'Visco', name: 'EYEVISC 2% 2ML PFS', price: 9.80, desc: 'HPMC' },

                // OTROS
                { cat: 'Otros', name: 'BIO BLUE 1ML PFS', price: 9.25, desc: 'Colorante' },
                { cat: 'Otros', name: 'BIOBLUE 90 PLUS', price: 39.00, desc: 'ERM/ILM' },
                { cat: 'Otros', name: 'BIOSIL 10ML', price: 65.00, desc: 'VR Silicona' },
                { cat: 'Otros', name: 'BIO OCTANE', price: 50.00, desc: 'Perfluorocarbono' },
                { cat: 'Otros', name: 'BIORING', price: 275.00, desc: 'Anillo Intraestromal' }
            ];

            const currentRappel = useMemo(() => {
                const level = [...rappelScale].reverse().find(r => simulatedSales >= r.limit);
                return level ? level : { limit: 0, rate: 0 };
            }, [simulatedSales]);

            const rappelAmount = simulatedSales * currentRappel.rate;

            return (
                <div className="max-w-7xl mx-auto p-4 md:p-10">
                    {/* Header */}
                    <div className="flex flex-col lg:flex-row lg:items-end justify-between gap-8 mb-12">
                        <div>
                            <div className="inline-block px-3 py-1 bg-blue-100 text-blue-700 text-[10px] font-black uppercase tracking-[0.2em] rounded-full mb-3">
                                Propuesta Comercial 2026
                            </div>
                            <h1 className="text-4xl lg:text-5xl font-black text-slate-900 tracking-tight">Innova Ocular</h1>
                            <p className="text-slate-500 font-medium text-lg mt-2">Plan Estratégico de Suministro Biotech</p>
                        </div>
                        <div className="flex bg-white p-1.5 rounded-2xl shadow-sm border border-slate-200 overflow-x-auto no-scrollbar">
                            {['overview', 'catalog', 'rappel'].map(tab => (
                                <button key={tab} onClick={() => setActiveTab(tab)}
                                    className={`px-8 py-3 rounded-xl text-sm font-bold transition-all duration-300 ${activeTab === tab ? 'bg-blue-600 text-white shadow-lg shadow-blue-200' : 'text-slate-500 hover:bg-slate-50'}`}>
                                    {tab === 'overview' ? 'Estrategia' : tab === 'catalog' ? 'Tarifario' : 'Simulador'}
                                </button>
                            ))}
                        </div>
                    </div>

                    {activeTab === 'overview' && (
                        <div className="space-y-10 animate-in fade-in slide-in-from-bottom-4 duration-700">
                            {/* Stats */}
                            <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
                                {objectives.map((obj, i) => (
                                    <div key={i} className="bg-white p-8 rounded-[32px] shadow-sm border border-slate-100 group hover:border-blue-200 transition-all">
                                        <div className="flex items-center justify-between mb-6">
                                            <div className="p-3.5 rounded-2xl bg-slate-50 text-slate-400 group-hover:bg-blue-50 group-hover:text-blue-600 transition-colors">
                                                <Icon name={obj.icon} size={24} />
                                            </div>
                                            <span className="text-[10px] font-black text-slate-300 uppercase tracking-widest">Target 2026</span>
                                        </div>
                                        <p className="text-sm font-bold text-slate-500 mb-1">{obj.label}</p>
                                        <h3 className="text-3xl font-black text-slate-900 tracking-tighter">
                                            {obj.goal.toLocaleString()} <span className="text-sm font-medium text-slate-400">UDS</span>
                                        </h3>
                                    </div>
                                ))}
                            </div>

                            {/* Main Chart */}
                            <div className="bg-white p-10 rounded-[40px] shadow-sm border border-slate-100">
                                <div className="flex flex-col md:flex-row md:items-center justify-between mb-10 gap-4">
                                    <div>
                                        <h3 className="font-black text-2xl text-slate-900 tracking-tight">Capacidad de Suministro</h3>
                                        <p className="text-slate-400 text-sm font-medium mt-1">Comparativa de Objetivo Biotech vs Volumen Total del Grupo</p>
                                    </div>
                                    <div className="flex items-center gap-6">
                                        <div className="flex items-center gap-2">
                                            <div className="w-3 h-3 bg-slate-200 rounded-full"></div>
                                            <span className="text-xs font-bold text-slate-500 uppercase">Grupo Total</span>
                                        </div>
                                        <div className="flex items-center gap-2">
                                            <div className="w-3 h-3 bg-blue-600 rounded-full shadow-sm shadow-blue-200"></div>
                                            <span className="text-xs font-bold text-slate-500 uppercase">Nuestro Objetivo</span>
                                        </div>
                                    </div>
                                </div>
                                <div className="h-80 w-full">
                                    <ResponsiveContainer>
                                        <BarChart data={objectives} layout="vertical" margin={{ left: 20, right: 40 }}>
                                            <CartesianGrid strokeDasharray="3 3" horizontal={true} vertical={false} stroke="#f1f5f9" />
                                            <XAxis type="number" hide />
                                            <YAxis dataKey="label" type="category" width={160} tick={{fontSize: 12, fontWeight: 800, fill: '#64748b'}} />
                                            <Tooltip cursor={{fill: '#f8fafc'}} contentStyle={{borderRadius: '24px', border: 'none', boxShadow: '0 25px 50px -12px rgb(0 0 0 / 0.15)', padding: '16px'}} />
                                            <Bar dataKey="total" fill="#f1f5f9" radius={[0, 12, 12, 0]} barSize={32} />
                                            <Bar dataKey="goal" fill="#2563eb" radius={[0, 12, 12, 0]} barSize={32} />
                                        </BarChart>
                                    </ResponsiveContainer>
                                </div>
                                <div className="mt-10 p-6 bg-slate-900 rounded-3xl flex items-start gap-5">
                                    <div className="p-3 bg-blue-500/20 text-blue-400 rounded-2xl shrink-0">
                                        <Icon name="info" />
                                    </div>
                                    <p className="text-sm text-slate-300 leading-relaxed font-medium">
                                        <strong>Fase de Introducción:</strong> Se marca un objetivo conservador del 9-10% de la red. Esta estrategia permite un despliegue logístico impecable en las clínicas satélite sin entrar en conflicto directo inmediato con la exclusividad de la competencia en el centro principal.
                                    </p>
                                </div>
                            </div>
                        </div>
                    )}

                    {activeTab === 'catalog' && (
                        <div className="bg-white rounded-[40px] shadow-sm border border-slate-100 overflow-hidden animate-in fade-in duration-500">
                            <div className="overflow-x-auto">
                                <table className="w-full text-left">
                                    <thead className="bg-slate-50 border-b border-slate-100">
                                        <tr>
                                            <th className="p-8 text-[10px] font-black text-slate-400 uppercase tracking-widest">Descripción del Producto</th>
                                            <th className="p-8 text-[10px] font-black text-slate-400 uppercase tracking-widest">Familia</th>
                                            <th className="p-8 text-[10px] font-black text-slate-400 uppercase tracking-widest text-right">Precio Neto (€)</th>
                                        </tr>
                                    </thead>
                                    <tbody className="divide-y divide-slate-50">
                                        {products.map((p, i) => (
                                            <tr key={i} className="hover:bg-blue-50/20 transition-colors">
                                                <td className="p-8">
                                                    <div className="font-black text-slate-900 text-sm tracking-tight uppercase">{p.name}</div>
                                                    <div className="text-xs text-slate-400 font-bold mt-1 tracking-tight">{p.desc}</div>
                                                </td>
                                                <td className="p-8">
                                                    <span className={`px-3 py-1.5 rounded-lg text-[9px] font-black uppercase tracking-tighter ${
                                                        p.cat === 'Fáquicas' ? 'bg-indigo-50 text-indigo-600' :
                                                        p.cat === 'Premium' ? 'bg-amber-50 text-amber-600' :
                                                        p.cat === 'Visco' ? 'bg-emerald-50 text-emerald-600' :
                                                        'bg-slate-100 text-slate-500'
                                                    }`}>
                                                        {p.cat}
                                                    </span>
                                                </td>
                                                <td className="p-8 text-right font-black text-blue-700 text-xl tracking-tighter">{p.price.toFixed(2)} €</td>
                                            </tr>
                                        ))}
                                    </tbody>
                                </table>
                            </div>
                            <div className="p-6 bg-slate-50 text-[10px] text-slate-400 font-bold uppercase tracking-widest text-center">
                                Todos los precios expresados por unidad y sujetos a condiciones de volumen anual. I.V.A. no incluido.
                            </div>
                        </div>
                    )}

                    {activeTab === 'rappel' && (
                        <div className="grid grid-cols-1 lg:grid-cols-2 gap-10 animate-in zoom-in-95 duration-500">
                            <div className="bg-white p-10 rounded-[40px] border border-slate-100">
                                <h3 className="font-black text-2xl text-slate-900 mb-10 tracking-tight flex items-center gap-3">
                                    <Icon name="award" className="text-blue-600" />
                                    Acuerdo Total 2026
                                </h3>
                                <div className="space-y-3">
                                    {rappelScale.map((r, i) => (
                                        <div key={i} className={`p-6 rounded-3xl flex justify-between items-center border-2 transition-all duration-500 ${simulatedSales >= r.limit ? 'bg-emerald-50 border-emerald-100 text-emerald-900' : 'bg-white border-slate-50 text-slate-200'}`}>
                                            <span className="text-sm font-black tracking-tight">Consumo Anual ≥ {r.limit.toLocaleString()} €</span>
                                            <span className={`font-black text-2xl ${simulatedSales >= r.limit ? 'text-emerald-500' : 'text-slate-100'}`}>{(r.rate * 100).toFixed(1)}%</span>
                                        </div>
                                    ))}
                                </div>
                            </div>
                            <div className="space-y-8">
                                <div className="bg-slate-900 p-12 rounded-[56px] text-white shadow-3xl relative overflow-hidden group">
                                    <div className="absolute top-0 right-0 w-64 h-64 bg-blue-600/10 rounded-full blur-[100px] -mr-20 -mt-20 group-hover:bg-blue-600/20 transition-all duration-1000"></div>
                                    <p className="text-slate-500 text-xs font-black uppercase tracking-[0.3em] mb-4">Simulador de Facturación</p>
                                    <div className="flex items-baseline gap-2 mb-12">
                                        <h2 className="text-7xl font-black tracking-tighter tabular-nums">{simulatedSales.toLocaleString()}</h2>
                                        <span className="text-2xl font-bold text-slate-700 uppercase tracking-widest">€</span>
                                    </div>
                                    <input type="range" min="100000" max="2500000" step="50000" value={simulatedSales} onChange={(e) => setSimulatedSales(Number(e.target.value))}
                                        className="w-full h-1.5 bg-slate-800 rounded-full appearance-none cursor-pointer accent-blue-500 mb-16" />
                                    <div className="grid grid-cols-2 gap-12 pt-12 border-t border-slate-800">
                                        <div>
                                            <p className="text-slate-500 text-[10px] font-black uppercase tracking-widest mb-3">Rappel Grupo</p>
                                            <p className="text-4xl font-black text-emerald-400 tabular-nums tracking-tighter">{(simulatedSales * currentRappel.rate).toLocaleString()} <span className="text-lg">€</span></p>
                                        </div>
                                        <div className="text-right">
                                            <p className="text-slate-500 text-[10px] font-black uppercase tracking-widest mb-3">Retorno Neto</p>
                                            <p className="text-4xl font-black text-blue-500 tracking-tighter">{(currentRappel.rate * 100).toFixed(1)}%</p>
                                        </div>
                                    </div>
                                </div>
                                <div className="bg-amber-50 p-8 rounded-[32px] border border-amber-100">
                                    <div className="flex gap-5">
                                        <div className="p-3 bg-amber-500 text-white rounded-2xl shrink-0 shadow-lg shadow-amber-200">
                                            <Icon name="alert-circle" />
                                        </div>
                                        <div>
                                            <h4 className="font-black text-amber-900 text-sm uppercase tracking-tight">Rappel por Centro (Bonus)</h4>
                                            <p className="text-xs text-amber-700/80 mt-2 font-bold leading-relaxed">
                                                Dicha revisión anual incluye un rappel individual acumulativo de hasta el 5,50% por centro si éste supera los 150.000 € de consumo.
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
